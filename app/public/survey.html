<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>


    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Gaegu:400,700" rel="stylesheet">

    <!-- Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<style>

.navbar {
    margin-bottom: 0;
    border-radius: 0;
    background-color: #485;
    color: #FFF;
    padding: 2% 0;
    font-family: 'Gaegu', cursive;
    font-size: 2.2em;
    border: 0;

}

.navbar-brand {
    float: left;
    min-height: 65px;
    max-height: 300px;
    padding: 0 15px 5px;
    font-family: 'Gaegu', cursive;
}

.navbar-brand img {
    height: auto;
    width:70px;
}

.navbar-inverse .navbar-nav .active a, .navbar-inverse .navbar-nav .active a:focus, .navbar-inverse .navbar-nav .active a:hover {
    color: #fff;
    background-color: #485;
}

.navbar-inverse .navbar-nav li a {
    color: #D5D5;
}

.carousel-caption {
    top: 50%;
    transform: translateY(-50%);
    text-transform: uppercase;
}

#matchPic{
    width: 90%;
    height: auto;
    margin: auto;
}
.modal-content{
    background-image: linear-gradient( 135deg, #70a6ff 10%, #ffe4b1 100%);
}
.surveyBtn{
    background-color: #0052d5;
    color: #ffb931;
}
#modalBtn{
    background-color: #0052d5;
    color: #ffb931;
}

h1{
    text-shadow: 4px 4px 2px rgba(150, 150, 150, 1);
}


</style>

<body>

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img src="/assets/images/logo.png">OK UGLY</a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active">
                        <a href="/">Home</a>
                    </li>
                    <li class="active">
                        <a href="/">About</a>
                    </li>
                    <li class="active">
                        <a href="/">Testimonials</a>
                    </li>
                </ul>

            </div>
        </div>
    </nav>

    <div class="container">

        <h2>Survey Questions</h2>
        <hr>

        <h3>
            <strong>About You</strong>
        </h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>

        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>

        <hr>

        <h3>
            <strong>Question 1</strong>
        </h3>
        <h4>You consider yourself a plant person.</h4>
        <select class="chosen-select" id="q1">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3>
            <strong>Question 2</strong>
        </h3>
        <h4>Generally speaking, you're happy to spend a whole day alone.</h4>
        <select class="chosen-select" id="q2">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


        <h3>
            <strong>Question 3</strong>
        </h3>
        <h4>You prefer mountains over the beach.</h4>
        <select class="chosen-select" id="q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


        <h3>
            <strong>Question 4</strong>
        </h3>
        <h4>You are a special snowflake.</h4>
        <select class="chosen-select" id="q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


        <h3>
            <strong>Question 5</strong>
        </h3>
        <h4>You live in a memeless world.</h4>
        <select class="chosen-select" id="q5">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


        <h3>
            <strong>Question 6</strong>
        </h3>
        <h4>Messi is the GOAT and not Ronaldo.</h4>
        <select class="chosen-select" id="q6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


        <h3>
            <strong>Question 7</strong>
        </h3>
        <h4>Your bed is the best place in the world.</h4>
        <select class="chosen-select" id="q7">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3>
            <strong>Question 8</strong>
        </h3>
        <h4>You would eat a finger if payed $1,000 dollars.</h4>
        <select class="chosen-select" id="q8">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3>
            <strong>Question 9</strong>
        </h3>
        <h4>It's Laurel.</h4>
        <select class="chosen-select" id="q9">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3>
            <strong>Question 10</strong>
        </h3>
        <h4>You feel more energetic after spending time with a group of people.</h4>
        <select class="chosen-select" id="q10">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>

         <!--  Modal Trigger/Submit Button -->
         <button type="submit" data-target="modal1" class=" surveyBtn waves-effect waves-light btn btn-lg btn-primary modal-trigger" id="submit">Submit</button>
        </div>
    </div>
    <div class=' col s4'>
        <p><a href="/api/friends" target="_blank">API Friends List</a> | <a href="https://github.com/gwapesofwath/friendFinder" target="_blank">GitHub Repo</a></p>
    </div>

    <!--  Modal Structure -->
    <div id="modal1" class="modal">
        <div class="modal-content">
            <h1>Best Match!</h1>
            <h5 id="matchName"></h5>
            <img id="matchPic" src="" alt="No Image" width=250px>
        </div>
        <div class="modal-footer">
            <a href="/survey" id = "modalBtn" class=" modal-action modal-close  waves-effect waves-light btn btn-lg btn-primary">Close</a>
        </div>
    </div>

</div>
<script type = "text/JavaScript">
        $(document).ready(function() {
            $("#submit").on("click", function(event) {
                event.preventDefault();
                //form validation
                function validateForm() {
                    var isValid = true;
                    $('.validateInput').each(function() {
                        if ($(this).val() === "") {
                            isValid = false;
                        }
                    });
                    $('.browser-default').each(function() {
                        if ($(this).val() === "") {
                            isValid = false;
                        }
                    });
                    return isValid;
                };
                if (validateForm() == true) {
                    //get user input
                    var userInput = {
                        name: $('#name').val().trim(),
                        profilePic: $('#photo').val().trim(),
                        scores: [
                            $('#q1').val(),
                            $('#q2').val(),
                            $('#q3').val(),
                            $('#q4').val(),
                            $('#q5').val(),
                            $('#q6').val(),
                            $('#q7').val(),
                            $('#q8').val(),
                            $('#q9').val(),
                            $('#q10').val(),
                        ]
                    };
                    console.log('userInput = ' + JSON.stringify(userInput));
                    //get current URL of website
                    var currentURL = window.location.origin;
                    //AJAX posts the data to friends API.
                    $.post(currentURL + "/api/friends", userInput, function(data) {
                        //Grab the result from the AJAX post so that the best match's name and photo are displayed.
                        console.log('data.name - ' + data.name);
                        $("#matchName").html("Name : " + data.name);
                        $("#matchPic").attr("src", data.photo);
                        
                    });
                     // Show the modal with the best match
                     $('.modal').modal(); 
                   //clear input fields after submission
                    $('#name').val("");
                    $('#photo').val("");
                    $('#q1').val("");
                    $('#q2').val("");
                    $('#q3').val("");
                    $('#q4').val("");
                    $('#q5').val("");
                    $('#q6').val("");
                    $('#q7').val("");
                    $('#q8').val("");
                    $('#q9').val("");
                    $('#q10').val("");
                } else {
                alert("Please fill out all fields!");
                };
            });
        });

    </script>

</body>

</html>